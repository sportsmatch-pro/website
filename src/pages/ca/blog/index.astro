---
import Layout from "../../../layouts/Layout.astro";

const res = await fetch(
  import.meta.env.API_BASE_URL + "articles?language=ca-ES"
);
const posts = await res.json();
---

<Layout title="SportsMatch - Últims posts" currentLang="ca-ES">
  <h1 class="text-3xl font-bold mb-6">Últims posts esportius</h1>

  {
    posts.length === 0 ? (
      <p>
        No s'han trobat posts. Assegura't que l'API retorna dades correctament.
      </p>
    ) : (
      <ul class="space-y-6">
        {posts.map((post) => (
          <li class="border border-gray-300 rounded p-4 shadow hover:shadow-md transition">
            <a
              href={`/ca/blog/${post.slug}`}
              class="text-xl font-semibold text-blue-600 hover:underline"
            >
              {post.title}
            </a>
            <p class="text-gray-600 mt-2">{post.description}</p>
          </li>
        ))}
      </ul>
    )
  }
</Layout>
